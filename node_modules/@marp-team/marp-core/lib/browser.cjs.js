"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const r=()=>"Apple Computer, Inc."===navigator.vendor?[n]:[];function n(t){Array.from(document.getElementsByTagName("svg"),e=>{if(e.hasAttribute("data-marpit-svg")){const{clientHeight:r,clientWidth:a}=e;e.style.transform||(e.style.transform="translateZ(0)");const o=t||e.currentScale||1,s=e.viewBox.baseVal.width/o,i=e.viewBox.baseVal.height/o,n=Math.min(r/i,a/s);Array.from(e.querySelectorAll(":scope > foreignObject"),t=>{const e=t.x.baseVal.value,o=t.y.baseVal.value;Array.from(t.querySelectorAll(":scope > section"),t=>{t.style.transformOrigin||(t.style.transformOrigin="0 0");const l=(a-n*s)/2-e,c=(r-n*i)/2-o;t.style.transform=`translate3d(${l}px,${c}px,0) scale(${n}) translate(${e}px,${o}px)`})})}})}const attr="data-marp-fitting",code="data-marp-fitting-code",math="data-marp-fitting-math",updateAttr=(t,e,r)=>{if(t.getAttribute(e)!==r)return t.setAttribute(e,r),!0};function fittingObserver(){Array.from(document.querySelectorAll(`svg[${attr}="svg"]`),t=>{const e=t.firstChild,r=e.firstChild,{scrollWidth:a,scrollHeight:o}=r;let s,i=1;if(t.hasAttribute(code)&&(s=t.parentElement.parentElement),t.hasAttribute(math)&&(s=t.parentElement),s){const t=getComputedStyle(s),e=Math.ceil(s.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight));e&&(i=e)}const n=Math.max(a,i),l=Math.max(o,1),c=`0 0 ${n} ${l}`;updateAttr(e,"width",`${n}`),updateAttr(e,"height",`${l}`),updateAttr(t,"preserveAspectRatio",getComputedStyle(t).getPropertyValue("--preserve-aspect-ratio")||"xMinYMin meet"),updateAttr(t,"viewBox",c)&&t.classList.toggle("__reflow__")})}function observer(t=!0){for(const t of r())t();fittingObserver(),t&&window.requestAnimationFrame(()=>observer(t))}function browser(){if("undefined"==typeof window)throw new Error("Marp Core's browser script is valid only in browser context.");window.marpCoreBrowserScript?console.warn("Marp Core's browser script has already executed."):(Object.defineProperty(window,"marpCoreBrowserScript",{value:!0}),observer())}exports.default=browser,exports.observer=observer;
